# gRPC Introduction
Ref: [grpc tutorial](https://grpc.io/docs/languages/java/basics/) [code](https://github.com/grpc/grpc-java/tree/master/examples/src/main/java/io/grpc/examples)


### gRPC- Remote Procedure call
- High performance & open source RPC framework. Developed by Google.
- Client application can invoke Server's method on different machine by using stub.
- Services are defined in proto file and Service implementations(stub) will be autogenerated by protoc compiler.
- Blocking stub (synchronous): Blocking/waiting for the response to send the next request. 
- Non-Blocking(asynchronous): Register a listener for call back.
    
### gRPC Types
	1) Unary: 
	The client sends a single request to the server and gets a single response back.
	
	    Client (1 req) <----> Server (1 resp)
	    Ex: Login
	
	2) Server Streaming
	The client sends a request to the server and gets a stream to read a sequence of messages back. 
	The client reads from the returned stream until there are no more messages. 
	gRPC guarantees message ordering within an individual RPC call.
	
		Client (1 req) <----> Server (n streams of resp)
		Ex: Download file
	
	3) Client Streaming 
	The client writes a sequence of messages and sends them to the server, again using a provided stream.
	Once the client has finished writing the messages, it waits for the server to read them and return its response. 
	Again gRPC guarantees message ordering within an individual RPC call.
	
		Client (n streams of req) <----> Server (1 resp)
		Ex: Upload file
	
	4) Bidirectional Streaming
	where both sides send a sequence of messages using a read-write stream. 
	The two streams operate independently, so clients and servers can read and write in whatever order they like: 
	for example, the server could wait to receive all the client messages before writing its responses, 
	or it could alternately read a message then write a message, or some other combination of reads and writes. 
	The order of messages in each stream is preserved.
	
	    Client (n streams of req) <----> Server (n streams of resp)
	    Ex: Video call

### gRPC protobuf maven dependencies 
	<dependencies>
		<!-- To generate language specific compiled Classes for message... -->
		<dependency>
			<groupId>io.grpc</groupId>
			<artifactId>grpc-protobuf</artifactId>
			<version>1.49.0</version>
		</dependency>
		
		<!-- Required if we use java 9 or above  -->
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>annotations-api</artifactId>
			<version>6.0.53</version>
			<scope>provided</scope>
		</dependency>
		
		<!-- To handle Json mappings json to java & java to json -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.13.3</version>
		</dependency>

		<!-- to handle grpc http calls -->
        <dependency>
            <groupId>io.grpc</groupId>
            <artifactId>grpc-netty-shaded</artifactId>
            <version>1.49.0</version>
        </dependency>

        <!-- Used to compile time to generate stub -->
        <dependency>
            <groupId>io.grpc</groupId>
            <artifactId>grpc-stub</artifactId>
            <version>1.49.0</version>
        </dependency>

	</dependencies>	

### grpc protobuf plugin

    <build>
        <extensions>
            <extension>
                <groupId>kr.motd.maven</groupId>
                <artifactId>os-maven-plugin</artifactId>
                <version>1.6.2</version>
            </extension>
        </extensions>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>11</source>
                    <target>11</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.xolstice.maven.plugins</groupId>
                <artifactId>protobuf-maven-plugin</artifactId>
                <version>0.6.1</version>
                <configuration>
                    <protocArtifact>
                        com.google.protobuf:protoc:3.21.1:exe:${os.detected.classifier}
                    </protocArtifact>
                    <pluginId>grpc-java</pluginId>
                    <pluginArtifact>
                        io.grpc:protoc-gen-grpc-java:1.49.0:exe:${os.detected.classifier}
                    </pluginArtifact>
                    <protoSourceRoot>
                        ${basedir}/src/main/proto/
                    </protoSourceRoot>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>compile-custom</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
